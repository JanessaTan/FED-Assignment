<!-- history.html -->
<!doctype html><html lang="en"><head><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Order History – HawkerHub</title>
<link rel="stylesheet" href="../css/base.css">
<link rel="stylesheet" href="../css/history.css">
</head><body>
<script src="assets/js/data.js"></script><script src="assets/js/utils.js"></script><script src="assets/js/auth.js"></script>
<script>renderHeader('history');</script>
<main class="container" id="root">
  <section>
    <h2>Order History</h2>
  </section>
  <div class="container">
    <div class="history-card">
      <div class="info">
        <h3>Golden Wok</h3>
        <p>Order: Hainanese Chicken Rice (x1)</p>
        <p>Customised: Less rice, extra chilli</p>
        <h5>Ordered on: 16 Jan 2026</h5>
      </div>
        <a href="saved-order.html" class="btn" onclick="saveOrder()"><img src="../img/bookmark.png" style="width:30px;height:30px;"></img></a>
    </div>

    <div class="history-card">
      <div class="info">
        <h3>Kopi & Teh Corner</h3>
        <p>Order: Teh Tarik (x1)</p>
        <h5>Ordered on: 5 Jan 2026</h5>
      </div>
      <a href="saved-order.html" class="btn" onclick="saveOrder()"><img src="../img/bookmark.png" style="width:30px;height:30px;"></img></a>
    </div>

    <div class="history-card">
      <div class="info">
        <h3>Little India Express</h3>
        <p>Order: Chicken Biryani (x1), Roti Prata (x2)</p>
        <h5>Ordered on: 1 Jan 2026</h5>
      </div>
      <a href="saved-order.html" class="btn" onclick="saveOrder()"><img src="../img/bookmark.png" style="width:30px;height:30px;"></img></a>
    </div>

</div>
</main>

<script src="script.js"></script>

<script>
  const hist = store.get(KEYS.ordersHistory,[]);
  $('#root').innerHTML = '<h2>Order History</h2>' + (hist.length? hist.map(o=>`
    <div class="row" style="justify-content:space-between;border-bottom:1px solid #eee;padding:8px 0">
      <div>#${o.id} • ${new Date(o.createdAt).toLocaleString()} • ${o.status}${o.scheduledAt? ' • Pickup: '+new Date(o.scheduledAt).toLocaleString():''}</div>
      <div><strong>${fmt(o.total)}</strong></div>
    </div>`).join('') : '<p>No orders yet.</p>');
</script>
</body></html>